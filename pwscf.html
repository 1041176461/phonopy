<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Pwscf &amp; phonopy calculation &#8212; Phonopy v.1.11.12</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.11.12',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Abinit &amp; phonopy calculation" href="abinit.html" />
    <link rel="prev" title="Wien2k &amp; phonopy calculation" href="wien2k.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Phonopy</a>
        <span class="navbar-text navbar-version pull-left"><b>1.11.12</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Download and install</a></li>
<li class="toctree-l1"><a class="reference internal" href="procedure.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="input-files.html">Input files</a></li>
<li class="toctree-l1"><a class="reference internal" href="output-files.html">Output files</a></li>
<li class="toctree-l1"><a class="reference internal" href="setting-tags.html">Setting tags</a></li>
<li class="toctree-l1"><a class="reference internal" href="command-options.html">Command options</a></li>
<li class="toctree-l1"><a class="reference internal" href="qha.html">Quasi harmonic approximation</a></li>
<li class="toctree-l1"><a class="reference internal" href="gruneisen.html">Mode Grüneisen parameters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="interfaces.html">Interfaces to calculators</a></li>
<li class="toctree-l1"><a class="reference internal" href="auxiliary-tools.html">Auxiliary tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="external-tools.html">External tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="phonopy-module.html">Using phonopy as a python module</a></li>
<li class="toctree-l1"><a class="reference internal" href="formulation.html">Formulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="citation.html">How to cite phonopy</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change Log</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Pwscf &amp; phonopy calculation</a><ul>
<li><a class="reference internal" href="#supported-pwscf-tags">Supported Pwscf tags</a></li>
<li><a class="reference internal" href="#how-to-run">How to run</a><ul>
<li><a class="reference internal" href="#non-analytical-term-correction-optional">Non-analytical term correction (Optional)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="wien2k.html" title="Previous Chapter: Wien2k & phonopy calculation"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Wien2k & phon...</span>
    </a>
  </li>
  <li>
    <a href="abinit.html" title="Next Chapter: Abinit & phonopy calculation"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Abinit & phon... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="pwscf-phonopy-calculation">
<span id="pwscf-interface"></span><h1>Pwscf &amp; phonopy calculation<a class="headerlink" href="#pwscf-phonopy-calculation" title="Permalink to this headline">¶</a></h1>
<p>Quantum espresso package itself has a set of the phonon calculation
system. But the document here explains how to calculate phonons using
phonopy, i.e., using the finite displacement and supercell approach.</p>
<div class="section" id="supported-pwscf-tags">
<h2>Supported Pwscf tags<a class="headerlink" href="#supported-pwscf-tags" title="Permalink to this headline">¶</a></h2>
<p>Currently Pwscf tags that phonopy can read are shown below.  Only
<code class="docutils literal"><span class="pre">ibrav</span> <span class="pre">=</span> <span class="pre">0</span></code> type representation of crystal structure is supported.
More tags may be supported on request.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">nat</span><span class="p">,</span> <span class="n">ntyp</span><span class="p">,</span> <span class="n">ATOMIC_SPECIES</span><span class="p">,</span> <span class="n">ATOMIC_POSITIONS</span><span class="p">,</span> <span class="n">CELL_PARAMETERS</span>
</pre></div>
</div>
</div>
<div class="section" id="how-to-run">
<h2>How to run<a class="headerlink" href="#how-to-run" title="Permalink to this headline">¶</a></h2>
<p>The procedure of Pwscf-phonopy calculation is shown below using the
NaCl example found in <code class="docutils literal"><span class="pre">example/NaCl-pwscf</span></code> directory.</p>
<ol class="arabic">
<li><p class="first">Read a Pwscf input file and create supercells with
<a class="reference internal" href="command-options.html#pwscf-mode"><span class="std std-ref">--pwscf</span></a> option:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phonopy</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">-</span><span class="n">d</span> <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="o">-</span><span class="n">c</span> <span class="n">NaCl</span><span class="o">.</span><span class="ow">in</span>
</pre></div>
</div>
<p>In this example, 2x2x2 supercells are created. <code class="docutils literal"><span class="pre">supercell.in</span></code> and
<code class="docutils literal"><span class="pre">supercell-xxx.in</span></code> (<code class="docutils literal"><span class="pre">xxx</span></code> are numbers) give the perfect
supercell and supercells with displacements, respectively. In the
case of the NaCl example, two files <code class="docutils literal"><span class="pre">supercell-001.in</span></code> and
<code class="docutils literal"><span class="pre">supercell-002.in</span></code> are created. In these supercell files, lines
only relevant to crystal structures are given. <code class="docutils literal"><span class="pre">disp.yaml</span></code> is
also generated, which contains information about supercell and
displacements.</p>
</li>
<li><p class="first">To make Pwscf input files, necessary setting information is added to
<code class="docutils literal"><span class="pre">supercell-xxx.in</span></code> files, e.g., by:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>% for i in {001,002};do cat header.in supercell-$i.in &gt;| NaCl-$i.in; done
</pre></div>
</div>
<p>where <code class="docutils literal"><span class="pre">header.in</span></code> is specially made for this NaCl example and
this file is found in <code class="docutils literal"><span class="pre">example/NaCl-pwscf</span></code> directory. This
setting is of course dependent on systems and has to be written for
each interested system. Note that supercells with displacements
must not be relaxed in the force calculations, because atomic
forces induced by a small atomic displacement are what we need for
phonon calculation.</p>
<p>Then Pwscf supercell calculations are executed to obtain force on
atoms, e.g., as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mpirun</span> <span class="n">pw</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span><span class="n">i</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">001.</span><span class="ow">in</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">001.</span><span class="n">out</span>
<span class="o">%</span> <span class="n">mpirun</span> <span class="n">pw</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span><span class="n">i</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">002.</span><span class="ow">in</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">002.</span><span class="n">out</span>
</pre></div>
</div>
</li>
<li><p class="first">To create <code class="docutils literal"><span class="pre">FORCE_SETS</span></code>, that is used by phonopy,
the following phonopy command is executed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phonopy</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">-</span><span class="n">f</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">001.</span><span class="n">out</span> <span class="n">NaCl</span><span class="o">-</span><span class="mf">002.</span><span class="n">out</span>
</pre></div>
</div>
<p>Here <code class="docutils literal"><span class="pre">.out</span></code> files are the saved text files of standard outputs of the
Pwscf calculations. If more supercells with displacements were
created in the step 1, all <code class="docutils literal"><span class="pre">.out</span></code> files are given in the above
command. To run this command, <code class="docutils literal"><span class="pre">disp.yaml</span></code> has to be located in
the current directory because the information on atomic
displacements stored in <code class="docutils literal"><span class="pre">disp.yaml</span></code> are used to generate
<code class="docutils literal"><span class="pre">FORCE_SETS</span></code>. See some more detail at
<a class="reference internal" href="command-options.html#pwscf-force-sets-option"><span class="std std-ref">Pwscf interface</span></a>.</p>
</li>
<li><p class="first">Now post-process of phonopy is ready to run. The unit cell file
used in the step 1 has to be specified but <code class="docutils literal"><span class="pre">FORCE_SETS</span></code> is
automatically read. Examples of post-process are shown below.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phonopy</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">-</span><span class="n">c</span> <span class="n">NaCl</span><span class="o">.</span><span class="ow">in</span> <span class="o">-</span><span class="n">p</span> <span class="n">band</span><span class="o">.</span><span class="n">conf</span>
        <span class="n">_</span>
  <span class="n">_</span> <span class="n">__</span> <span class="o">|</span> <span class="o">|</span><span class="n">__</span>   <span class="n">___</span>  <span class="n">_</span> <span class="n">__</span>   <span class="n">___</span>   <span class="n">_</span> <span class="n">__</span>  <span class="n">_</span>   <span class="n">_</span>
 <span class="o">|</span> <span class="s1">&#39;_ \| &#39;</span><span class="n">_</span> \ <span class="o">/</span> <span class="n">_</span> \<span class="o">|</span> <span class="s1">&#39;_ \ / _ \ | &#39;</span><span class="n">_</span> \<span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span>
 <span class="o">|</span> <span class="o">|</span><span class="n">_</span><span class="p">)</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">||</span> <span class="o">|</span><span class="n">_</span><span class="p">)</span> <span class="o">|</span> <span class="o">|</span><span class="n">_</span><span class="o">|</span> <span class="o">|</span>
 <span class="o">|</span> <span class="o">.</span><span class="n">__</span><span class="o">/|</span><span class="n">_</span><span class="o">|</span> <span class="o">|</span><span class="n">_</span><span class="o">|</span>\<span class="n">___</span><span class="o">/|</span><span class="n">_</span><span class="o">|</span> <span class="o">|</span><span class="n">_</span><span class="o">|</span>\<span class="n">___</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="o">.</span><span class="n">__</span><span class="o">/</span> \<span class="n">__</span><span class="p">,</span> <span class="o">|</span>
 <span class="o">|</span><span class="n">_</span><span class="o">|</span>                            <span class="o">|</span><span class="n">_</span><span class="o">|</span>    <span class="o">|</span><span class="n">___</span><span class="o">/</span>
                                      <span class="mf">1.11</span><span class="o">.</span><span class="mi">0</span>

<span class="n">Python</span> <span class="n">version</span> <span class="mf">2.7</span><span class="o">.</span><span class="mi">12</span>
<span class="n">Spglib</span> <span class="n">version</span> <span class="mf">1.9</span><span class="o">.</span><span class="mi">2</span>
<span class="n">Calculator</span> <span class="n">interface</span><span class="p">:</span> <span class="n">pwscf</span>
<span class="n">Band</span> <span class="n">structure</span> <span class="n">mode</span>
<span class="n">Settings</span><span class="p">:</span>
  <span class="n">Supercell</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
  <span class="n">Primitive</span> <span class="n">axis</span><span class="p">:</span>
    <span class="p">[</span> <span class="mf">0.</span>   <span class="mf">0.5</span>  <span class="mf">0.5</span><span class="p">]</span>
    <span class="p">[</span> <span class="mf">0.5</span>  <span class="mf">0.</span>   <span class="mf">0.5</span><span class="p">]</span>
    <span class="p">[</span> <span class="mf">0.5</span>  <span class="mf">0.5</span>  <span class="mf">0.</span> <span class="p">]</span>
<span class="n">Spacegroup</span><span class="p">:</span> <span class="n">Fm</span><span class="o">-</span><span class="mi">3</span><span class="n">m</span> <span class="p">(</span><span class="mi">225</span><span class="p">)</span>
<span class="n">Computing</span> <span class="n">force</span> <span class="n">constants</span><span class="o">...</span>
<span class="n">Reciprocal</span> <span class="n">space</span> <span class="n">paths</span> <span class="ow">in</span> <span class="n">reduced</span> <span class="n">coordinates</span><span class="p">:</span>
<span class="p">[</span> <span class="mf">0.00</span>  <span class="mf">0.00</span>  <span class="mf">0.00</span><span class="p">]</span> <span class="o">--&gt;</span> <span class="p">[</span> <span class="mf">0.50</span>  <span class="mf">0.00</span>  <span class="mf">0.00</span><span class="p">]</span>
<span class="p">[</span> <span class="mf">0.50</span>  <span class="mf">0.00</span>  <span class="mf">0.00</span><span class="p">]</span> <span class="o">--&gt;</span> <span class="p">[</span> <span class="mf">0.50</span>  <span class="mf">0.50</span>  <span class="mf">0.00</span><span class="p">]</span>
<span class="p">[</span> <span class="mf">0.50</span>  <span class="mf">0.50</span>  <span class="mf">0.00</span><span class="p">]</span> <span class="o">--&gt;</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.00</span> <span class="o">-</span><span class="mf">0.00</span>  <span class="mf">0.00</span><span class="p">]</span>
<span class="p">[</span> <span class="mf">0.00</span>  <span class="mf">0.00</span>  <span class="mf">0.00</span><span class="p">]</span> <span class="o">--&gt;</span> <span class="p">[</span> <span class="mf">0.50</span>  <span class="mf">0.50</span>  <span class="mf">0.50</span><span class="p">]</span>
                 <span class="n">_</span>
   <span class="n">___</span> <span class="n">_</span> <span class="n">__</span>   <span class="n">__</span><span class="o">|</span> <span class="o">|</span>
  <span class="o">/</span> <span class="n">_</span> \ <span class="s1">&#39;_ \ / _` |</span>
 <span class="o">|</span>  <span class="n">__</span><span class="o">/</span> <span class="o">|</span> <span class="o">|</span> <span class="o">|</span> <span class="p">(</span><span class="n">_</span><span class="o">|</span> <span class="o">|</span>
  \<span class="n">___</span><span class="o">|</span><span class="n">_</span><span class="o">|</span> <span class="o">|</span><span class="n">_</span><span class="o">|</span>\<span class="n">__</span><span class="p">,</span><span class="n">_</span><span class="o">|</span>
</pre></div>
</div>
<p><a class="reference internal" href="_images/NaCl-pwscf-band.png"><img alt="pwscf-band" src="_images/NaCl-pwscf-band.png" style="width: 50%;" /></a></p>
<p><code class="docutils literal"><span class="pre">--pwscf</span> <span class="pre">-c</span> <span class="pre">NaCl.in</span></code> is specific for the Pwscf-phonopy
calculation but the other settings are totally common among calculator
interfaces such as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phonopy</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">-</span><span class="n">c</span> <span class="n">NaCl</span><span class="o">.</span><span class="ow">in</span> <span class="o">--</span><span class="n">dim</span><span class="o">=</span><span class="s2">&quot;2 2 2&quot;</span> <span class="p">[</span><span class="n">other</span><span class="o">-</span><span class="n">OPTIONS</span><span class="p">]</span> <span class="p">[</span><span class="n">setting</span><span class="o">-</span><span class="n">file</span><span class="p">]</span>
</pre></div>
</div>
<p>For settings and command options, see
<a class="reference internal" href="setting-tags.html#setting-tags"><span class="std std-ref">Setting tags</span></a> and <a class="reference internal" href="command-options.html#command-options"><span class="std std-ref">Command options</span></a>, respectively, and
for examples, see <a class="reference internal" href="examples.html#examples-link"><span class="std std-ref">Examples</span></a>.</p>
</li>
</ol>
<div class="section" id="non-analytical-term-correction-optional">
<h3>Non-analytical term correction (Optional)<a class="headerlink" href="#non-analytical-term-correction-optional" title="Permalink to this headline">¶</a></h3>
<p>To activate non-analytical term correction, <a class="reference internal" href="input-files.html#born-file"><span class="std std-ref">BORN (optional)</span></a> is
required. This file contains the information of Born effective charge
and dielectric constant. These physical values are also obtained from
the pwscf (<code class="docutils literal"><span class="pre">pw.x</span></code>) &amp; phonon (<code class="docutils literal"><span class="pre">ph.x</span></code>) codes in quantum-espresso
package. There are two steps. The first step is usual self-consistent
field (SCF) calculation
by and the second step is running its response function calculations
under DFPT.</p>
<p>For the SCF calculation, the input file <code class="docutils literal"><span class="pre">NaCl.in</span></code> looks like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="o">&amp;</span><span class="n">control</span>
    <span class="n">calculation</span> <span class="o">=</span> <span class="s1">&#39;scf&#39;</span>
    <span class="n">tprnfor</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
    <span class="n">tstress</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
    <span class="n">pseudo_dir</span> <span class="o">=</span> <span class="s1">&#39;/home/togo/espresso/pseudo/&#39;</span>
 <span class="o">/</span>
 <span class="o">&amp;</span><span class="n">system</span>
    <span class="n">ibrav</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nat</span> <span class="o">=</span> <span class="mi">8</span>
    <span class="n">ntyp</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ecutwfc</span> <span class="o">=</span> <span class="mf">70.0</span>
 <span class="o">/</span>
 <span class="o">&amp;</span><span class="n">electrons</span>
    <span class="n">diagonalization</span> <span class="o">=</span> <span class="s1">&#39;david&#39;</span>
    <span class="n">conv_thr</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">d</span><span class="o">-</span><span class="mi">9</span>
 <span class="o">/</span>
<span class="n">ATOMIC_SPECIES</span>
 <span class="n">Na</span>  <span class="mf">22.98976928</span> <span class="n">Na</span><span class="o">.</span><span class="n">pbe</span><span class="o">-</span><span class="n">spn</span><span class="o">-</span><span class="n">kjpaw_psl</span><span class="o">.</span><span class="mf">0.2</span><span class="o">.</span><span class="n">UPF</span>
 <span class="n">Cl</span>  <span class="mf">35.453</span>      <span class="n">Cl</span><span class="o">.</span><span class="n">pbe</span><span class="o">-</span><span class="n">n</span><span class="o">-</span><span class="n">kjpaw_psl</span><span class="o">.</span><span class="mf">0.1</span><span class="o">.</span><span class="n">UPF</span>
<span class="n">ATOMIC_POSITIONS</span> <span class="n">crystal</span>
 <span class="n">Na</span>   <span class="mf">0.0000000000000000</span>  <span class="mf">0.0000000000000000</span>  <span class="mf">0.0000000000000000</span>
 <span class="n">Na</span>   <span class="mf">0.0000000000000000</span>  <span class="mf">0.5000000000000000</span>  <span class="mf">0.5000000000000000</span>
 <span class="n">Na</span>   <span class="mf">0.5000000000000000</span>  <span class="mf">0.0000000000000000</span>  <span class="mf">0.5000000000000000</span>
 <span class="n">Na</span>   <span class="mf">0.5000000000000000</span>  <span class="mf">0.5000000000000000</span>  <span class="mf">0.0000000000000000</span>
 <span class="n">Cl</span>   <span class="mf">0.5000000000000000</span>  <span class="mf">0.5000000000000000</span>  <span class="mf">0.5000000000000000</span>
 <span class="n">Cl</span>   <span class="mf">0.5000000000000000</span>  <span class="mf">0.0000000000000000</span>  <span class="mf">0.0000000000000000</span>
 <span class="n">Cl</span>   <span class="mf">0.0000000000000000</span>  <span class="mf">0.5000000000000000</span>  <span class="mf">0.0000000000000000</span>
 <span class="n">Cl</span>   <span class="mf">0.0000000000000000</span>  <span class="mf">0.0000000000000000</span>  <span class="mf">0.5000000000000000</span>
<span class="n">CELL_PARAMETERS</span> <span class="n">angstrom</span>
 <span class="mf">5.6903014761756712</span> <span class="mi">0</span> <span class="mi">0</span>
 <span class="mi">0</span> <span class="mf">5.6903014761756712</span> <span class="mi">0</span>
 <span class="mi">0</span> <span class="mi">0</span> <span class="mf">5.6903014761756712</span>
<span class="n">K_POINTS</span> <span class="n">automatic</span>
 <span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
</pre></div>
</div>
<p>where more the k-point mesh numbers are specified. This may be exectued as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mpirun</span> <span class="o">~/</span><span class="n">espresso</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">pw</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span><span class="n">i</span> <span class="n">NaCl</span><span class="o">.</span><span class="ow">in</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">NaCl</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Many files whose names stating with <code class="docutils literal"><span class="pre">pwscf</span></code> should be created. These
are used for the next calculation. The input file for the response
function calculations, <code class="docutils literal"><span class="pre">NaCl.ph.in</span></code>, is
created as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="o">&amp;</span><span class="n">inputph</span>
  <span class="n">tr2_ph</span> <span class="o">=</span> <span class="mf">1.0</span><span class="n">d</span><span class="o">-</span><span class="mi">14</span><span class="p">,</span>
  <span class="n">epsil</span> <span class="o">=</span> <span class="o">.</span><span class="n">true</span><span class="o">.</span>
 <span class="o">/</span>
<span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Similary <code class="docutils literal"><span class="pre">ph.x</span></code> is executed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">mpirun</span> <span class="o">~/</span><span class="n">espresso</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">ph</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span><span class="n">i</span> <span class="n">NaCl</span><span class="o">.</span><span class="n">ph</span><span class="o">.</span><span class="ow">in</span> <span class="o">|&amp;</span> <span class="n">tee</span> <span class="n">NaCl</span><span class="o">.</span><span class="n">ph</span><span class="o">.</span><span class="n">out</span>
</pre></div>
</div>
<p>Finally the Born effective charges and dielectric constant are
obtained in the output file <code class="docutils literal"><span class="pre">NaCl.ph.out</span></code>. The <code class="docutils literal"><span class="pre">BORN</span></code> file has to
be created manually following the <code class="docutils literal"><span class="pre">BORN</span></code> format
(<a class="reference internal" href="input-files.html#born-file"><span class="std std-ref">BORN (optional)</span></a>). The <code class="docutils literal"><span class="pre">BORN</span></code> file for this NaCl calculation would
be something like below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">default</span> <span class="n">value</span>
<span class="mf">2.472958201</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">2.472958201</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">2.472958201</span>
<span class="mf">1.105385</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.105385</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">1.105385</span>
<span class="o">-</span><span class="mf">1.105385</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">1.105385</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="o">-</span><span class="mf">1.105385</span>
</pre></div>
</div>
<p>Once this is made, the non-analytical term correction is included
just adding the <code class="docutils literal"><span class="pre">--nac</span></code> option as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">phonopy</span> <span class="o">--</span><span class="n">pwscf</span> <span class="o">--</span><span class="n">nac</span> <span class="o">-</span><span class="n">c</span> <span class="n">NaCl</span><span class="o">.</span><span class="ow">in</span> <span class="o">-</span><span class="n">p</span> <span class="n">band</span><span class="o">.</span><span class="n">conf</span>
</pre></div>
</div>
<p><a class="reference internal" href="_images/NaCl-pwscf-band-NAC.png"><img alt="pwscf-band-nac" src="_images/NaCl-pwscf-band-NAC.png" style="width: 50%;" /></a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/pwscf.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2009, Atsushi Togo.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>